{% extends 'entrees/base.html' %}
{% load material_form material_frontend %}
{% load i18n %}
{% load static %}

{% block extrahead %}
{{ block.super }}
{{ wizard.form.media }}
{% endblock extrahead %}

{% block subtitle %}Formulaire{% endblock %}

{% block content %}
<div class="left-panel">
    <div class="card">
        <dmc-form>
            <form action="" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="card-content" id="form-container">
                    <p>Étape {{ wizard.steps.step1 }} sur {{ wizard.steps.count }}</p>
                    <table>
                        {% block form %}
                        {{ wizard.management_form }}
                        {% if wizard.form.forms %}
                        {{ wizard.form.management_form }}
                        {% for form in wizard.form.forms %}
                        {% if view.layout or form.layout %}
                        {% if view.layout %}
                        {% form layout=view.layout %}{% endform %}
                        {% endif %}
                        {% if form.layout %}
                        <!-- Contact recommandé -->
                        <h4 class="card-title">{% translate "Contact recommandé" %}</h4>
                        {% form layout=form.layout %}{% endform %}
                        {% endif %}
                        {% else %}
                        {% form %}{% endform %}
                        {% endif %}
                        {% endfor %}
                        {% else %}
                        {% if view.layout or wizard.form.layout %}
                        {% if view.layout %}
                        {% form layout=view.layout %}{% endform %}
                        {% endif %}
                        {% if wizard.form.layout %}
                        <!-- Contact référent -->
                        <h4 class="card-title">{% translate "Contact référent" %}</h4>
                        {% form layout=wizard.form.layout %}{% endform %}
                        {% endif %}
                        {% else %}
                        {% form %}{% endform %}
                        {% endif %}
                        {% endif %}

                        {% endblock form %}
                    </table>
                    <div class="card-action">
                        <div class="right-align">
                            {% block submit_row %}
                            {% if wizard.steps.prev %}
                            <button name="wizard_goto_step" type="submit" value="{{ wizard.steps.first }}">
                                {% translate "Première étape" %}</button>
                            <button name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}">
                                {% translate "Étape précédente" %}</button>
                            {% endif %}
                            <input type="submit" value="{% translate 'Submit' %}" />
                            {% endblock submit_row %}
                        </div>
                    </div>
            </form>
        </dmc-form>
    </div>
</div>
{% endblock content %}